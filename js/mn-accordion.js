(function(global,factory){if(typeof define==='function'&&define.amd){define(['exports'],factory)}else if(typeof exports!=='undefined'){factory(exports)}else{const mod={exports:{},};factory(mod.exports);global.index=mod.exports}}(this,function(exports){'use strict';Object.defineProperty(exports,'__esModule',{value:!0,});const _extends=Object.assign||function(target){for(let i=1;i<arguments.length;i++){const source=arguments[i];for(const key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}
return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}
const _createClass=(function(){function defineProperties(target,props){for(let i=0;i<props.length;i++){const descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if('value' in descriptor){descriptor.writable=!0}
Object.defineProperty(target,descriptor.key,descriptor)}}
return function(Constructor,protoProps,staticProps){if(protoProps){defineProperties(Constructor.prototype,protoProps)}
if(staticProps){defineProperties(Constructor,staticProps)}
return Constructor}}());const global=typeof window!=='undefined'?window:undefined;const document=global.document;const Accordion=(function(){function Accordion(element){const options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Accordion);const self=this;self.defaultOptions={eventName:'click',eventDelay:0,collapsible:!0,multiple:!1,defaultOpenedIndexes:0,slideDuration:200,slideDownFn:function slideDownFn(el,slideDuration){el.style.WebkitTransitionDuration=slideDuration+'ms';el.style.transitionDuration=slideDuration+'ms';el.style.height='auto';const height=el.scrollHeight;el.style.height='0';global.setTimeout(function(){el.style.height=height+'px'},0)},slideUpFn:function slideUpFn(el,slideDuration){el.style.WebkitTransitionDuration=slideDuration+'ms';el.style.transitionDuration=slideDuration+'ms';global.setTimeout(function(){el.style.height='0'},0)},};self.options=_extends({},self.defaultOptions,options);self.accordion=element;self.accordionItemsLength=self.accordion.childElementCount;if(document.readyState==='complete'){self.init()}else{document.addEventListener('readystatechange',function(event){if(event.target.readyState==='complete'){self.init()}},!1)}}
_createClass(Accordion,[{key:'init',value:function init(){const self=this;const openedIndexes=self.options.defaultOpenedIndexes instanceof Array?self.options.defaultOpenedIndexes:[self.options.defaultOpenedIndexes];const _loop=function _loop(i){const accordionItem=self.accordion.children[i];const accordionItemHeading=accordionItem.getElementsByClassName('accordion-heading')[0];if(accordionItemHeading){const eventFn=function eventFn(e){self.handleAccordionItemHeadingEvent(e,accordionItem,i)};if(accordionItemHeading.eventListenerAttached!==!0){accordionItemHeading.addEventListener(self.options.eventName,eventFn,!1)}
accordionItemHeading.eventListenerAttached=!0}
if(openedIndexes.indexOf(i)>-1){self.openAccordionItem(accordionItem,i)}else{self.closeAccordionItem(accordionItem)}};for(let i=0;i<self.accordionItemsLength;i++){_loop(i)}},},{key:'openAccordionItem',value:function openAccordionItem(item,itemIndex){const self=this;item.isOpened=!0;item.classList.add('state-open');const accordionItemContent=item.getElementsByClassName('accordion-content')[0];if(!self.options.multiple){self.closeRestAccordionItems(itemIndex)}
self.options.slideDownFn(accordionItemContent,self.options.slideDuration)},},{key:'openAccordionItemByIndex',value:function openAccordionItemByIndex(itemIndex){const self=this;const accordionItem=self.accordion.children[itemIndex];self.openAccordionItem(accordionItem,itemIndex)},},{key:'closeAccordionItem',value:function closeAccordionItem(item){const self=this;const accordionItemContent=item.getElementsByClassName('accordion-content')[0];item.isOpened=!1;item.classList.remove('state-open');self.options.slideUpFn(accordionItemContent,self.options.slideDuration)},},{key:'closeAccordionItemByIndex',value:function closeAccordionItemByIndex(itemIndex){const self=this;const accordionItem=self.accordion.children[itemIndex];self.closeAccordionItem(accordionItem)},},{key:'closeRestAccordionItems',value:function closeRestAccordionItems(){const self=this;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}
for(let i=0;i<self.accordionItemsLength;i++){if(args.indexOf(i)===-1){const _accordionItem=self.accordion.children[i];self.closeAccordionItem(_accordionItem)}}},},{key:'handleAccordionItemHeadingEvent',value:function handleAccordionItemHeadingEvent(e,item,itemIndex){const self=this;self.eventTimeout&&window.clearTimeout(self.eventTimeout);self.eventTimeout=window.setTimeout(function(){if(item.isOpened&&!self.options.multiple){if(self.options.collapsible){self.closeAccordionItem(item)}
self.closeRestAccordionItems(itemIndex)}else if(item.isOpened&&self.options.multiple){self.closeAccordionItem(item)}else{self.openAccordionItem(item,itemIndex)}},self.options.eventDelay)},}]);return Accordion}());global.Accordion=Accordion;exports.default=Accordion}))