(function(global,factory){if(typeof define==='function'&&define.amd){define(['exports'],factory)}else if(typeof exports!=='undefined'){factory(exports)}else{const mod={exports:{},};factory(mod.exports);global.bodyScrollLock=mod.exports}}(this,function(exports){'use strict';Object.defineProperty(exports,'__esModule',{value:!0,});function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}
return arr2}
return Array.from(arr)}
let hasPassiveEvents=!1;if(typeof window!=='undefined'){const passiveTestOptions={get passive(){hasPassiveEvents=!0;return undefined},};window.addEventListener('testPassive',null,passiveTestOptions);window.removeEventListener('testPassive',null,passiveTestOptions)}
const isIosDevice=typeof window!=='undefined'&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==='MacIntel'&&window.navigator.maxTouchPoints>1);let locks=[];let documentListenerAdded=!1;let initialClientY=-1;let previousBodyOverflowSetting=void 0;let previousBodyPaddingRight=void 0;const allowTouchMove=function allowTouchMove(el){return locks.some(function(lock){if(lock.options.allowTouchMove&&lock.options.allowTouchMove(el)){return!0}
return!1})};const preventDefault=function preventDefault(rawEvent){const e=rawEvent||window.event;if(allowTouchMove(e.target)){return!0}
if(e.touches.length>1){return!0}
if(e.preventDefault){e.preventDefault()}
return!1};const setOverflowHidden=function setOverflowHidden(options){if(previousBodyPaddingRight===undefined){const _reserveScrollBarGap=!!options&&options.reserveScrollBarGap===!0;const scrollBarGap=window.innerWidth-document.documentElement.clientWidth;if(_reserveScrollBarGap&&scrollBarGap>0){previousBodyPaddingRight=document.body.style.paddingRight;document.body.style.paddingRight=scrollBarGap+'px'}}
if(previousBodyOverflowSetting===undefined){previousBodyOverflowSetting=document.body.style.overflow;document.body.style.overflow='hidden'}};const restoreOverflowSetting=function restoreOverflowSetting(){if(previousBodyPaddingRight!==undefined){document.body.style.paddingRight=previousBodyPaddingRight;previousBodyPaddingRight=undefined}
if(previousBodyOverflowSetting!==undefined){document.body.style.overflow=previousBodyOverflowSetting;previousBodyOverflowSetting=undefined}};const isTargetElementTotallyScrolled=function isTargetElementTotallyScrolled(targetElement){return targetElement?targetElement.scrollHeight-targetElement.scrollTop<=targetElement.clientHeight:!1};const handleScroll=function handleScroll(event,targetElement){const clientY=event.targetTouches[0].clientY-initialClientY;if(allowTouchMove(event.target)){return!1}
if(targetElement&&targetElement.scrollTop===0&&clientY>0){return preventDefault(event)}
if(isTargetElementTotallyScrolled(targetElement)&&clientY<0){return preventDefault(event)}
event.stopPropagation();return!0};const disableBodyScroll=exports.disableBodyScroll=function disableBodyScroll(targetElement,options){if(!targetElement){console.error('disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.');return}
if(locks.some(function(lock){return lock.targetElement===targetElement})){return}
const lock={targetElement,options:options||{},};locks=[].concat(_toConsumableArray(locks),[lock]);if(isIosDevice){targetElement.ontouchstart=function(event){if(event.targetTouches.length===1){initialClientY=event.targetTouches[0].clientY}};targetElement.ontouchmove=function(event){if(event.targetTouches.length===1){handleScroll(event,targetElement)}};if(!documentListenerAdded){document.addEventListener('touchmove',preventDefault,hasPassiveEvents?{passive:!1}:undefined);documentListenerAdded=!0}}else{setOverflowHidden(options)}};const clearAllBodyScrollLocks=exports.clearAllBodyScrollLocks=function clearAllBodyScrollLocks(){if(isIosDevice){locks.forEach(function(lock){lock.targetElement.ontouchstart=null;lock.targetElement.ontouchmove=null});if(documentListenerAdded){document.removeEventListener('touchmove',preventDefault,hasPassiveEvents?{passive:!1}:undefined);documentListenerAdded=!1}
initialClientY=-1}else{restoreOverflowSetting()}
locks=[]};const enableBodyScroll=exports.enableBodyScroll=function enableBodyScroll(targetElement){if(!targetElement){console.error('enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.');return}
locks=locks.filter(function(lock){return lock.targetElement!==targetElement});if(isIosDevice){targetElement.ontouchstart=null;targetElement.ontouchmove=null;if(documentListenerAdded&&locks.length===0){document.removeEventListener('touchmove',preventDefault,hasPassiveEvents?{passive:!1}:undefined);documentListenerAdded=!1}}else if(!locks.length){restoreOverflowSetting()}}}))